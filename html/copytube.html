<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>copytube API documentation</title>
<meta name="description" content="CopyTube&#39;s main module …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>copytube</code></h1>
</header>
<section id="section-intro">
<p>CopyTube's main module.</p>
<p>This module contains all the functionality of CopyTube allowing a user to copy
a public playlist of up to 195 videos (due to API quota restrictions) to a
private playlist on their own channel after configuring their own API key and
client_secret file through YouTube's Data V3 API.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;CopyTube&#39;s main module.

This module contains all the functionality of CopyTube allowing a user to copy
a public playlist of up to 195 videos (due to API quota restrictions) to a
private playlist on their own channel after configuring their own API key and
client_secret file through YouTube&#39;s Data V3 API.

&#34;&#34;&#34;

import os
from typing import Any, List, Dict
from urllib.parse import urlparse, parse_qs
import sys

import google_auth_oauthlib.flow
import googleapiclient.discovery
import googleapiclient.errors

import config

scopes: List[str] = [&#34;https://www.googleapis.com/auth/youtube.force-ssl&#34;]
&#34;&#34;&#34;List[str]: Scope of requests to be made by CopyTube.

The scope for requests was determined from this source,
https://developers.google.com/youtube/v3/docs/playlistItems/insert,
under the section, Authorization.
&#34;&#34;&#34;


def main():

    # Disable OAuthlib&#39;s HTTPS verification when running locally.
    # *DO NOT* leave this option enabled in production.
    os.environ[&#34;OAUTHLIB_INSECURE_TRANSPORT&#34;] = &#34;1&#34;

    api_service_name: str = &#34;youtube&#34;
    api_version: str = &#34;v3&#34;

    header: str = &#34;&#34;&#34;
 ######   #######  ########  ##    ## ######## ##     ## ########  ######## 
##    ## ##     ## ##     ##  ##  ##     ##    ##     ## ##     ## ##       
##       ##     ## ##     ##   ####      ##    ##     ## ##     ## ##       
##       ##     ## ########     ##       ##    ##     ## ########  ######   
##       ##     ## ##           ##       ##    ##     ## ##     ## ##       
##    ## ##     ## ##           ##       ##    ##     ## ##     ## ##       
 ######   #######  ##           ##       ##     #######  ########  ######## 


        &#34;&#34;&#34;

    print(header)

    print(&#34;With a valid YouTube playlist url, CopyTube can copy a public playlist of up to 195 videos.&#34;)

    # Request URL from user
    url_input: str = input(&#39;Enter playlist URL: &#39;)

    # URL validation
    while not valid_input(url_input):
        # Reenter url
        print(url_input, &#39;is not a valid youtube playlist\n&#39;)
        url_input = input(&#39;Please enter a valid url or q to quit: &#39;)

    credentials = get_credentials(config.CLIENT_SECRETS_FILE)

    youtube = googleapiclient.discovery.build(
        api_service_name, api_version, credentials=credentials,
        developerKey=config.DEVELOPER_KEY)

    id: str = get_playlist_id(url_input)

    information = get_song_ids(youtube, id) # Dict[str, List[str], str, str] 
    playlist_title: str = information[&#39;title&#39;]
    song_ids: List[str] = information[&#39;songs&#39;]

    # Create new playlist
    new_playlist_id: str = create_new_playlist(youtube, playlist_title)

    # Add videos to new playlist
    add_videos_to_playlist(youtube, new_playlist_id, song_ids)


def valid_input(url_to_check: str) -&gt; bool:
    &#34;&#34;&#34;Checks for valid URL input from user.

    Checks for a quit signal or a YouTube URL with a &#39;list&#39; query parameter.

    Parameters
    ----------
    url_to_check : str
        String containing the URL input by the user.
    
    Returns
    -------
    bool
        True, if the URL is YouTube URL with a &#39;list&#39; parameter. False,
        otherwise. If the user inputs the quit signal &#39;q&#39;, the program exits.

    &#34;&#34;&#34;
    if url_to_check == &#39;q&#39;:
        sys.exit()

    else:
        result = urlparse(url_to_check)

        if (&#39;youtube.com&#39; not in result.netloc) and (&#39;youtube.com&#39; not in result.path):
            return False

        if not (&#39;list&#39; in parse_qs(result.query).keys()):
            return False

        return True


def get_credentials(secret: str) -&gt; Any:
    &#34;&#34;&#34;Obtains credentials necessary to interact with YouTube&#39;s API

    Parameters
    ----------
    secret : str
        String containing the file name of the client secret JSON file
    
    Returns
    -------
    Instance
        Credentials instance for use with the YouTube API client

    &#34;&#34;&#34;
    flow = google_auth_oauthlib.flow.InstalledAppFlow.from_client_secrets_file(
        secret, scopes)

    return flow.run_console()


def get_playlist_id(playlist_url: str) -&gt; str:
    &#34;&#34;&#34;Retrieves ID of playlist from URL provided using a URL parser.

    Parameters
    ----------
    playlist_url : str
        String of URL that points to a YouTube playlist
    
    Returns
    -------
    str
        String of the playlist ID
    
    &#34;&#34;&#34;
    parse_result: Any = urlparse(playlist_url)
    queries = parse_qs(parse_result.query)

    return queries[&#39;list&#39;][0]


def create_new_playlist(client: Any, title: str) -&gt; str:
    &#34;&#34;&#34;Creates a new playlist on the user&#39;s YouTube account.

    Inserts a playlist into the user&#39;s YouTube account with the name following
    the format: &lt;playlist to be copied title&gt;-Copy

    Parameters
    ----------
    client : Any
        Instance of YouTube API client to make requests through
    title : str
        Title of the playlist to be copied
    
    Returns
    -------
    str
        String of the new playlist&#39;s ID

    &#34;&#34;&#34;
    request = client.playlists().insert(
        part=&#34;snippet,status&#34;,
        body={
            &#34;snippet&#34;: {
                &#34;title&#34;: title + &#39;-Copy&#39;,
                &#34;description&#34;: &#34;Copied &#34; + title,
                &#34;tags&#34;: [
                    &#34;sample playlist&#34;,
                    &#34;API call&#34;,
                    &#34;MUSIC&#34;
                ],
                &#34;defaultLanguage&#34;: &#34;en&#34;
            },
            &#34;status&#34;: {
                &#34;privacyStatus&#34;: &#34;private&#34;
            }
        })

    response = request.execute()

    return response[&#39;id&#39;]


def get_song_ids(client: Any, playlist_id: str) -&gt; Dict[str, Any]:
    &#34;&#34;&#34;Retrieves a list of the song IDs in a YouTube playlist

    Parameters
    ----------
    client : Any
        YouTube API client to make requests through
    playlist_id : str
        Playlist ID of the YouTube playlist to retrieve song IDs from
    
    Returns
    -------
    Dict[str: Any]
        Returns a dictionary containing the following information:

            {
                &#39;songs&#39;: List of song IDs,
                &#39;title&#39;: Title of playlist to be copied
            }
    
    &#34;&#34;&#34;
    curr_page: str = &#34;&#34;
    playlist_title: str = &#34;&#34;
    song_ids: List[str] = []

    # Requests playlist information and retrieves video IDs
    while True:

        # Building request
        request = client.playlistItems().list(
            part=&#34;contentDetails, snippet&#34;,
            playlistId=playlist_id,
            pageToken=curr_page,
            maxResults=50
        )
        response = request.execute()

        playlist_title = response[&#39;items&#39;][0][&#39;snippet&#39;][&#39;channelTitle&#39;]

        # Adding video IDs to songIDs list
        for video in response[&#39;items&#39;]:
            song_ids.append(video[&#39;contentDetails&#39;][&#39;videoId&#39;])

        # Checking for last page
        if &#39;nextPageToken&#39; not in response:
            break

        curr_page = response[&#39;nextPageToken&#39;]

    info = {
        &#39;songs&#39;: song_ids,
        &#39;title&#39;: playlist_title
    }

    return info


def add_videos_to_playlist(client: Any, playlist_id: str, songs: List[str]):
    &#34;&#34;&#34;Inserts videos from list to new playlist.

    Loops through the list of song IDs obtained and uses the YouTube API client
    to insert the songs into the newly created playlist.

    Parameters
    ----------
    client : Any
        YouTube API client to make requests through
    playlist : str
        String of the new playlist ID
    songs : List[str]
        List of song IDs to be added to the new playlist

    &#34;&#34;&#34;
    counter = 0
    new_playlist_length = min(195, len(songs))

    while counter &lt; new_playlist_length:
        request = client.playlistItems().insert(
            part=&#34;snippet&#34;,
            body={
                &#34;snippet&#34;: {
                    &#34;playlistId&#34;: playlist_id,
                    &#34;position&#34;: 0,
                    &#34;resourceId&#34;: {
                        &#34;kind&#34;: &#34;youtube#video&#34;,
                        &#34;videoId&#34;: songs[counter]
                    }
                }
            }
        )

        request.execute()

        printProgressBar(counter, new_playlist_length)

        counter += 1

    # Check for playlist private
    printProgressBar(counter, new_playlist_length)

    print(counter, &#34; songs added to new playlist at www.youtube.com/playlist?list=&#34;, playlist_id, sep=&#34;&#34;)


# Print iterations progress
# Source: https://stackoverflow.com/questions/3173320/text-progress-bar-in-the-console
def printProgressBar(iteration, total, prefix=&#39;&#39;, suffix=&#39;&#39;, decimals=1, 
    length=100, fill=&#39;█&#39;, printEnd=&#34;\r&#34;):
    &#34;&#34;&#34;Progress bar that prints progress of songs added to new playlist.
    
    Source of progress bar can be found here:
    https://stackoverflow.com/questions/3173320/text-progress-bar-in-the-console
    
    Parameters
    ----------
    iteration : int
        current iteration
    total : int
        total iterations
    prefix : str, optional
        prefix string
    suffix : str, optional
        suffix string
    decimals : int, optional
        positive number of decimals in percent complete
    length : int, optional
        character length of bar
    fill : str, optional
        bar fill character
    printEnd : str, optional
        end character (e.g. &#34;\\r&#34;, &#34;\\r\\n&#34;)

    &#34;&#34;&#34;
    percent = (&#34;{0:.&#34; + str(decimals) + &#34;f}&#34;).format(100 *
                                                     (iteration / float(total)))
    filledLength = int(length * iteration // total)
    bar = fill * filledLength + &#39;-&#39; * (length - filledLength)
    print(f&#39;\r{prefix} |{bar}| {percent}% {suffix}&#39;, end=printEnd)
    # Print New Line on Complete
    if iteration == total:
        print()


if __name__ == &#34;__main__&#34;:
    main()</code></pre>
</details>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-variables">Global variables</h2>
<dl>
<dt id="copytube.scopes"><code class="name">var <span class="ident">scopes</span> : List[str]</code></dt>
<dd>
<div class="desc"><p>List[str]: Scope of requests to be made by CopyTube.</p>
<p>The scope for requests was determined from this source,
<a href="https://developers.google.com/youtube/v3/docs/playlistItems/insert,">https://developers.google.com/youtube/v3/docs/playlistItems/insert,</a>
under the section, Authorization.</p></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="copytube.add_videos_to_playlist"><code class="name flex">
<span>def <span class="ident">add_videos_to_playlist</span></span>(<span>client: Any, playlist_id: str, songs: List[str])</span>
</code></dt>
<dd>
<div class="desc"><p>Inserts videos from list to new playlist.</p>
<p>Loops through the list of song IDs obtained and uses the YouTube API client
to insert the songs into the newly created playlist.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>client</code></strong> :&ensp;<code>Any</code></dt>
<dd>YouTube API client to make requests through</dd>
<dt><strong><code>playlist</code></strong> :&ensp;<code>str</code></dt>
<dd>String of the new playlist ID</dd>
<dt><strong><code>songs</code></strong> :&ensp;<code>List[str]</code></dt>
<dd>List of song IDs to be added to the new playlist</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_videos_to_playlist(client: Any, playlist_id: str, songs: List[str]):
    &#34;&#34;&#34;Inserts videos from list to new playlist.

    Loops through the list of song IDs obtained and uses the YouTube API client
    to insert the songs into the newly created playlist.

    Parameters
    ----------
    client : Any
        YouTube API client to make requests through
    playlist : str
        String of the new playlist ID
    songs : List[str]
        List of song IDs to be added to the new playlist

    &#34;&#34;&#34;
    counter = 0
    new_playlist_length = min(195, len(songs))

    while counter &lt; new_playlist_length:
        request = client.playlistItems().insert(
            part=&#34;snippet&#34;,
            body={
                &#34;snippet&#34;: {
                    &#34;playlistId&#34;: playlist_id,
                    &#34;position&#34;: 0,
                    &#34;resourceId&#34;: {
                        &#34;kind&#34;: &#34;youtube#video&#34;,
                        &#34;videoId&#34;: songs[counter]
                    }
                }
            }
        )

        request.execute()

        printProgressBar(counter, new_playlist_length)

        counter += 1

    # Check for playlist private
    printProgressBar(counter, new_playlist_length)

    print(counter, &#34; songs added to new playlist at www.youtube.com/playlist?list=&#34;, playlist_id, sep=&#34;&#34;)</code></pre>
</details>
</dd>
<dt id="copytube.create_new_playlist"><code class="name flex">
<span>def <span class="ident">create_new_playlist</span></span>(<span>client: Any, title: str) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Creates a new playlist on the user's YouTube account.</p>
<p>Inserts a playlist into the user's YouTube account with the name following
the format: <playlist to be copied title>-Copy</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>client</code></strong> :&ensp;<code>Any</code></dt>
<dd>Instance of YouTube API client to make requests through</dd>
<dt><strong><code>title</code></strong> :&ensp;<code>str</code></dt>
<dd>Title of the playlist to be copied</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>String of the new playlist's ID</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_new_playlist(client: Any, title: str) -&gt; str:
    &#34;&#34;&#34;Creates a new playlist on the user&#39;s YouTube account.

    Inserts a playlist into the user&#39;s YouTube account with the name following
    the format: &lt;playlist to be copied title&gt;-Copy

    Parameters
    ----------
    client : Any
        Instance of YouTube API client to make requests through
    title : str
        Title of the playlist to be copied
    
    Returns
    -------
    str
        String of the new playlist&#39;s ID

    &#34;&#34;&#34;
    request = client.playlists().insert(
        part=&#34;snippet,status&#34;,
        body={
            &#34;snippet&#34;: {
                &#34;title&#34;: title + &#39;-Copy&#39;,
                &#34;description&#34;: &#34;Copied &#34; + title,
                &#34;tags&#34;: [
                    &#34;sample playlist&#34;,
                    &#34;API call&#34;,
                    &#34;MUSIC&#34;
                ],
                &#34;defaultLanguage&#34;: &#34;en&#34;
            },
            &#34;status&#34;: {
                &#34;privacyStatus&#34;: &#34;private&#34;
            }
        })

    response = request.execute()

    return response[&#39;id&#39;]</code></pre>
</details>
</dd>
<dt id="copytube.get_credentials"><code class="name flex">
<span>def <span class="ident">get_credentials</span></span>(<span>secret: str) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>Obtains credentials necessary to interact with YouTube's API</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>secret</code></strong> :&ensp;<code>str</code></dt>
<dd>String containing the file name of the client secret JSON file</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Instance</code></dt>
<dd>Credentials instance for use with the YouTube API client</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_credentials(secret: str) -&gt; Any:
    &#34;&#34;&#34;Obtains credentials necessary to interact with YouTube&#39;s API

    Parameters
    ----------
    secret : str
        String containing the file name of the client secret JSON file
    
    Returns
    -------
    Instance
        Credentials instance for use with the YouTube API client

    &#34;&#34;&#34;
    flow = google_auth_oauthlib.flow.InstalledAppFlow.from_client_secrets_file(
        secret, scopes)

    return flow.run_console()</code></pre>
</details>
</dd>
<dt id="copytube.get_playlist_id"><code class="name flex">
<span>def <span class="ident">get_playlist_id</span></span>(<span>playlist_url: str) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieves ID of playlist from URL provided using a URL parser.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>playlist_url</code></strong> :&ensp;<code>str</code></dt>
<dd>String of URL that points to a YouTube playlist</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>String of the playlist ID</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_playlist_id(playlist_url: str) -&gt; str:
    &#34;&#34;&#34;Retrieves ID of playlist from URL provided using a URL parser.

    Parameters
    ----------
    playlist_url : str
        String of URL that points to a YouTube playlist
    
    Returns
    -------
    str
        String of the playlist ID
    
    &#34;&#34;&#34;
    parse_result: Any = urlparse(playlist_url)
    queries = parse_qs(parse_result.query)

    return queries[&#39;list&#39;][0]</code></pre>
</details>
</dd>
<dt id="copytube.get_song_ids"><code class="name flex">
<span>def <span class="ident">get_song_ids</span></span>(<span>client: Any, playlist_id: str) ‑> Dict[str, Any]</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieves a list of the song IDs in a YouTube playlist</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>client</code></strong> :&ensp;<code>Any</code></dt>
<dd>YouTube API client to make requests through</dd>
<dt><strong><code>playlist_id</code></strong> :&ensp;<code>str</code></dt>
<dd>Playlist ID of the YouTube playlist to retrieve song IDs from</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Dict[str: Any]</code></dt>
<dd>Returns a dictionary containing the following information:<pre><code>{
    'songs': List of song IDs,
    'title': Title of playlist to be copied
}
</code></pre>
</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_song_ids(client: Any, playlist_id: str) -&gt; Dict[str, Any]:
    &#34;&#34;&#34;Retrieves a list of the song IDs in a YouTube playlist

    Parameters
    ----------
    client : Any
        YouTube API client to make requests through
    playlist_id : str
        Playlist ID of the YouTube playlist to retrieve song IDs from
    
    Returns
    -------
    Dict[str: Any]
        Returns a dictionary containing the following information:

            {
                &#39;songs&#39;: List of song IDs,
                &#39;title&#39;: Title of playlist to be copied
            }
    
    &#34;&#34;&#34;
    curr_page: str = &#34;&#34;
    playlist_title: str = &#34;&#34;
    song_ids: List[str] = []

    # Requests playlist information and retrieves video IDs
    while True:

        # Building request
        request = client.playlistItems().list(
            part=&#34;contentDetails, snippet&#34;,
            playlistId=playlist_id,
            pageToken=curr_page,
            maxResults=50
        )
        response = request.execute()

        playlist_title = response[&#39;items&#39;][0][&#39;snippet&#39;][&#39;channelTitle&#39;]

        # Adding video IDs to songIDs list
        for video in response[&#39;items&#39;]:
            song_ids.append(video[&#39;contentDetails&#39;][&#39;videoId&#39;])

        # Checking for last page
        if &#39;nextPageToken&#39; not in response:
            break

        curr_page = response[&#39;nextPageToken&#39;]

    info = {
        &#39;songs&#39;: song_ids,
        &#39;title&#39;: playlist_title
    }

    return info</code></pre>
</details>
</dd>
<dt id="copytube.main"><code class="name flex">
<span>def <span class="ident">main</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def main():

    # Disable OAuthlib&#39;s HTTPS verification when running locally.
    # *DO NOT* leave this option enabled in production.
    os.environ[&#34;OAUTHLIB_INSECURE_TRANSPORT&#34;] = &#34;1&#34;

    api_service_name: str = &#34;youtube&#34;
    api_version: str = &#34;v3&#34;

    header: str = &#34;&#34;&#34;
 ######   #######  ########  ##    ## ######## ##     ## ########  ######## 
##    ## ##     ## ##     ##  ##  ##     ##    ##     ## ##     ## ##       
##       ##     ## ##     ##   ####      ##    ##     ## ##     ## ##       
##       ##     ## ########     ##       ##    ##     ## ########  ######   
##       ##     ## ##           ##       ##    ##     ## ##     ## ##       
##    ## ##     ## ##           ##       ##    ##     ## ##     ## ##       
 ######   #######  ##           ##       ##     #######  ########  ######## 


        &#34;&#34;&#34;

    print(header)

    print(&#34;With a valid YouTube playlist url, CopyTube can copy a public playlist of up to 195 videos.&#34;)

    # Request URL from user
    url_input: str = input(&#39;Enter playlist URL: &#39;)

    # URL validation
    while not valid_input(url_input):
        # Reenter url
        print(url_input, &#39;is not a valid youtube playlist\n&#39;)
        url_input = input(&#39;Please enter a valid url or q to quit: &#39;)

    credentials = get_credentials(config.CLIENT_SECRETS_FILE)

    youtube = googleapiclient.discovery.build(
        api_service_name, api_version, credentials=credentials,
        developerKey=config.DEVELOPER_KEY)

    id: str = get_playlist_id(url_input)

    information = get_song_ids(youtube, id) # Dict[str, List[str], str, str] 
    playlist_title: str = information[&#39;title&#39;]
    song_ids: List[str] = information[&#39;songs&#39;]

    # Create new playlist
    new_playlist_id: str = create_new_playlist(youtube, playlist_title)

    # Add videos to new playlist
    add_videos_to_playlist(youtube, new_playlist_id, song_ids)</code></pre>
</details>
</dd>
<dt id="copytube.printProgressBar"><code class="name flex">
<span>def <span class="ident">printProgressBar</span></span>(<span>iteration, total, prefix='', suffix='', decimals=1, length=100, fill='█', printEnd='\r')</span>
</code></dt>
<dd>
<div class="desc"><p>Progress bar that prints progress of songs added to new playlist.</p>
<p>Source of progress bar can be found here:
<a href="https://stackoverflow.com/questions/3173320/text-progress-bar-in-the-console">https://stackoverflow.com/questions/3173320/text-progress-bar-in-the-console</a></p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>iteration</code></strong> :&ensp;<code>int</code></dt>
<dd>current iteration</dd>
<dt><strong><code>total</code></strong> :&ensp;<code>int</code></dt>
<dd>total iterations</dd>
<dt><strong><code>prefix</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>prefix string</dd>
<dt><strong><code>suffix</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>suffix string</dd>
<dt><strong><code>decimals</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>positive number of decimals in percent complete</dd>
<dt><strong><code>length</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>character length of bar</dd>
<dt><strong><code>fill</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>bar fill character</dd>
<dt><strong><code>printEnd</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>end character (e.g. "\r", "\r\n")</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def printProgressBar(iteration, total, prefix=&#39;&#39;, suffix=&#39;&#39;, decimals=1, 
    length=100, fill=&#39;█&#39;, printEnd=&#34;\r&#34;):
    &#34;&#34;&#34;Progress bar that prints progress of songs added to new playlist.
    
    Source of progress bar can be found here:
    https://stackoverflow.com/questions/3173320/text-progress-bar-in-the-console
    
    Parameters
    ----------
    iteration : int
        current iteration
    total : int
        total iterations
    prefix : str, optional
        prefix string
    suffix : str, optional
        suffix string
    decimals : int, optional
        positive number of decimals in percent complete
    length : int, optional
        character length of bar
    fill : str, optional
        bar fill character
    printEnd : str, optional
        end character (e.g. &#34;\\r&#34;, &#34;\\r\\n&#34;)

    &#34;&#34;&#34;
    percent = (&#34;{0:.&#34; + str(decimals) + &#34;f}&#34;).format(100 *
                                                     (iteration / float(total)))
    filledLength = int(length * iteration // total)
    bar = fill * filledLength + &#39;-&#39; * (length - filledLength)
    print(f&#39;\r{prefix} |{bar}| {percent}% {suffix}&#39;, end=printEnd)
    # Print New Line on Complete
    if iteration == total:
        print()</code></pre>
</details>
</dd>
<dt id="copytube.valid_input"><code class="name flex">
<span>def <span class="ident">valid_input</span></span>(<span>url_to_check: str) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Checks for valid URL input from user.</p>
<p>Checks for a quit signal or a YouTube URL with a 'list' query parameter.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>url_to_check</code></strong> :&ensp;<code>str</code></dt>
<dd>String containing the URL input by the user.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>True, if the URL is YouTube URL with a 'list' parameter. False,
otherwise. If the user inputs the quit signal 'q', the program exits.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def valid_input(url_to_check: str) -&gt; bool:
    &#34;&#34;&#34;Checks for valid URL input from user.

    Checks for a quit signal or a YouTube URL with a &#39;list&#39; query parameter.

    Parameters
    ----------
    url_to_check : str
        String containing the URL input by the user.
    
    Returns
    -------
    bool
        True, if the URL is YouTube URL with a &#39;list&#39; parameter. False,
        otherwise. If the user inputs the quit signal &#39;q&#39;, the program exits.

    &#34;&#34;&#34;
    if url_to_check == &#39;q&#39;:
        sys.exit()

    else:
        result = urlparse(url_to_check)

        if (&#39;youtube.com&#39; not in result.netloc) and (&#39;youtube.com&#39; not in result.path):
            return False

        if not (&#39;list&#39; in parse_qs(result.query).keys()):
            return False

        return True</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-variables">Global variables</a></h3>
<ul class="">
<li><code><a title="copytube.scopes" href="#copytube.scopes">scopes</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="copytube.add_videos_to_playlist" href="#copytube.add_videos_to_playlist">add_videos_to_playlist</a></code></li>
<li><code><a title="copytube.create_new_playlist" href="#copytube.create_new_playlist">create_new_playlist</a></code></li>
<li><code><a title="copytube.get_credentials" href="#copytube.get_credentials">get_credentials</a></code></li>
<li><code><a title="copytube.get_playlist_id" href="#copytube.get_playlist_id">get_playlist_id</a></code></li>
<li><code><a title="copytube.get_song_ids" href="#copytube.get_song_ids">get_song_ids</a></code></li>
<li><code><a title="copytube.main" href="#copytube.main">main</a></code></li>
<li><code><a title="copytube.printProgressBar" href="#copytube.printProgressBar">printProgressBar</a></code></li>
<li><code><a title="copytube.valid_input" href="#copytube.valid_input">valid_input</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>